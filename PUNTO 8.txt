
CREATE OR REPLACE PROCEDURE sp_decrease_value_vehicles
AS
	TOTAL INTEGER;
BEGIN
	TOTAL := (	SELECT COUNT (TYPE_OF_VEHICLES.TYPE_ID) 
				FROM VEHICLES
				INNER JOIN TYPE_OF_VEHICLES ON VEHICLES.TYPE_ID = TYPE_OF_VEHICLES.TYPE_ID );

	UPDATE VEHICLES SET REPLACEMENT_VALUE:= CURRENT_VALUE , CURRENT_VALUE:= (CURRENT_VALUE * (1-(2/100))
	FROM VEHICLES
	INNER JOIN TYPE_OF_VEHICLES ON VEHICLES.TYPE_ID = TYPE_OF_VEHICLES.TYPE_ID
	WHERE TYPE_OF_VEHICLES.TYPE_DEDESCRIPTION IN ('Moped','Motorcycle','Trike motorcycle');
	
	UPDATE VEHICLES SET REPLACEMENT_VALUE:= CURRENT_VALUE , CURRENT_VALUE:= (CURRENT_VALUE * (1-(3/100))
	FROM VEHICLES
	INNER JOIN TYPE_OF_VEHICLES ON VEHICLES.TYPE_ID = TYPE_OF_VEHICLES.TYPE_ID
	WHERE TYPE_OF_VEHICLES.TYPE_DEDESCRIPTION IN ('Car','Light rigid heavy vehicle','Medium rigid heavy');
	
	UPDATE VEHICLES SET REPLACEMENT_VALUE:= CURRENT_VALUE , CURRENT_VALUE:= (CURRENT_VALUE * (1-(5/100))
	FROM VEHICLES
	INNER JOIN TYPE_OF_VEHICLES ON VEHICLES.TYPE_ID = TYPE_OF_VEHICLES.TYPE_ID
	WHERE TYPE_OF_VEHICLES.TYPE_DEDESCRIPTION NOT IN ('Car','Light rigid heavy vehicle','Medium rigid heavy','Moped','Motorcycle','Trike motorcycle');
	
	DBMS_OUTPUT.PUT_LINE('Total number of vehicles updated successfully: ' || TOTAL);		
END;